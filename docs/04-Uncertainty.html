<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Experiments 2024 - 4&nbsp; Uncertainty</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./05-Visualization.html" rel="next">
<link href="./03-ExperimentalDesign.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./04-Uncertainty.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Uncertainty</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Experiments 2024</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Notes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-Experimentation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Why Experiment?</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-CausalEffects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Causal Effects</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-ExperimentalDesign.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Experimental Design</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-Uncertainty.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Uncertainty</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-Visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Visualization</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-ethics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Ethics and Sampling Considerations</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-FieldExperiments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Field Experiments</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-QuasiNaturalExperiments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Quasi and Natural Experiments</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-LabExperiments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Lab Experiments and Behavioral Games</span></span></a>
  </div>
</li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Section Contents</h2>
   
  <ul>
  <li><a href="#standard-errors" id="toc-standard-errors" class="nav-link active" data-scroll-target="#standard-errors"><span class="header-section-number">4.1</span> Standard Errors</a>
  <ul>
  <li><a href="#standard-error-of-the-mean" id="toc-standard-error-of-the-mean" class="nav-link" data-scroll-target="#standard-error-of-the-mean"><span class="header-section-number">4.1.1</span> Standard Error of the Mean</a></li>
  <li><a href="#standard-error-for-a-difference-in-means" id="toc-standard-error-for-a-difference-in-means" class="nav-link" data-scroll-target="#standard-error-for-a-difference-in-means"><span class="header-section-number">4.1.2</span> Standard error for a difference in means</a></li>
  </ul></li>
  <li><a href="#confidence-intervals" id="toc-confidence-intervals" class="nav-link" data-scroll-target="#confidence-intervals"><span class="header-section-number">4.2</span> Confidence Intervals</a></li>
  <li><a href="#hypothesis-tests" id="toc-hypothesis-tests" class="nav-link" data-scroll-target="#hypothesis-tests"><span class="header-section-number">4.3</span> Hypothesis Tests</a>
  <ul>
  <li><a href="#t-tests" id="toc-t-tests" class="nav-link" data-scroll-target="#t-tests"><span class="header-section-number">4.3.1</span> t-tests</a></li>
  <li><a href="#p-values" id="toc-p-values" class="nav-link" data-scroll-target="#p-values"><span class="header-section-number">4.3.2</span> p-values</a></li>
  </ul></li>
  <li><a href="#empirical-application" id="toc-empirical-application" class="nav-link" data-scroll-target="#empirical-application"><span class="header-section-number">4.4</span> Empirical Application</a>
  <ul>
  <li><a href="#treatment" id="toc-treatment" class="nav-link" data-scroll-target="#treatment"><span class="header-section-number">4.4.1</span> Treatment</a></li>
  <li><a href="#analysis" id="toc-analysis" class="nav-link" data-scroll-target="#analysis"><span class="header-section-number">4.4.2</span> Analysis</a></li>
  <li><a href="#heterogeneous-treatment-effects" id="toc-heterogeneous-treatment-effects" class="nav-link" data-scroll-target="#heterogeneous-treatment-effects"><span class="header-section-number">4.4.3</span> Heterogeneous Treatment Effects</a></li>
  <li><a href="#difference-in-proportions" id="toc-difference-in-proportions" class="nav-link" data-scroll-target="#difference-in-proportions"><span class="header-section-number">4.4.4</span> Difference in Proportions</a></li>
  </ul></li>
  <li><a href="#randomization-inference" id="toc-randomization-inference" class="nav-link" data-scroll-target="#randomization-inference"><span class="header-section-number">4.5</span> Randomization Inference</a></li>
  <li><a href="#a-note-on-expectations-and-variance" id="toc-a-note-on-expectations-and-variance" class="nav-link" data-scroll-target="#a-note-on-expectations-and-variance"><span class="header-section-number">4.6</span> A Note on Expectations and Variance</a></li>
  <li><a href="#equivalence-of-t-test-and-anova" id="toc-equivalence-of-t-test-and-anova" class="nav-link" data-scroll-target="#equivalence-of-t-test-and-anova"><span class="header-section-number">4.7</span> Equivalence of t-test and ANOVA</a></li>
  <li><a href="#comparing-different-types-of-tests" id="toc-comparing-different-types-of-tests" class="nav-link" data-scroll-target="#comparing-different-types-of-tests"><span class="header-section-number">4.8</span> Comparing different types of tests</a></li>
  <li><a href="#experimental-design-complications" id="toc-experimental-design-complications" class="nav-link" data-scroll-target="#experimental-design-complications"><span class="header-section-number">4.9</span> Experimental Design Complications</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="uncertainty" class="quarto-section-identifier"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Uncertainty</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>In this section, we cover calculations of uncertainty following Gerber and Green Chapter 3 and 9.3.</p>
<ul>
<li>We cover the computation of standard errors and confidence intervals.</li>
<li>We introduce the null hypothesis testing framework.</li>
<li>We then look at an experimental application and compute t-tests and interactions to assess average and heterogeneous treatment effects.</li>
<li>Finally, we examine randomization inference as an alternative to t-tests.</li>
</ul>
<section id="standard-errors" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="standard-errors"><span class="header-section-number">4.1</span> Standard Errors</h2>
<p>Standard errors represent the standard deviation of a sampling distribution.</p>
<p><strong><em>What is the standard deviation?</em></strong></p>
<p>Measure of spread: typical deviation of an observation from the mean.</p>
<p><img src="images/spread1.png" class="img-fluid" style="width:40.0%"> <img src="images/spread2.png" class="img-fluid" style="width:40.0%"></p>
<p><em>From the Cartoon Guide to Statistics</em></p>
<p>To calculate the standard deviation:</p>
<ol type="1">
<li>Take a squared deviation from the mean for a unit <span class="math inline">\(i\)</span>. <span class="math display">\[\begin{align*}
&amp;= (y_i -  \bar{y})^2
\end{align*}\]</span></li>
<li>Do this for each unit <span class="math inline">\(i\)</span> out of a sample. Take the sum. <span class="math display">\[\begin{align*}
&amp;= \sum_{i=1}^{N} (y_i -  \bar{y})^2
\end{align*}\]</span></li>
<li>Divide over the total sample. When we are dealing with a sample from a population whose mean is unknown (usually the case), we have to take N-1 instead of N. <span class="math display">\[\begin{align*}
&amp;= \frac{1}{N-1} \sum_{i=1}^{N} (y_i -  \bar{y})^2
\end{align*}\]</span></li>
<li>Take the square root <span class="math display">\[\begin{align*}
s &amp;= \sqrt{\frac{1}{N-1} \sum_{i=1}^{N} (y_i -  \bar{y})^2 }
\end{align*}\]</span> Remember: standard deviation is the square root of the variance!</li>
</ol>
<p>Let’s say these were the data for a sample of 10 voters’ scores on a feeling thermometer of their views toward liberals.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>fts <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">40</span>, <span class="dv">95</span>, <span class="dv">100</span>, <span class="dv">5</span>, <span class="dv">75</span>, <span class="dv">80</span>, <span class="dv">65</span>, <span class="dv">100</span>, <span class="dv">90</span>, <span class="dv">28</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 1. take the squared deviation from the mean</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>sq.dev <span class="ot">&lt;-</span> (fts <span class="sc">-</span> <span class="fu">mean</span>(fts))<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 2. Take the sum</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>sum.sq.dev <span class="ot">&lt;-</span> <span class="fu">sum</span>(sq.dev)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 3. Divide over N - 1</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>sum.sq.dev.n <span class="ot">&lt;-</span> sum.sq.dev<span class="sc">/</span>(<span class="fu">length</span>(fts) <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 4. Take the square root</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(sum.sq.dev.n)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>s</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 33.02457</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="do">## optional code</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(fts) <span class="co"># or sqrt(var(fts)) </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 33.02457</code></pre>
</div>
</div>
<p><strong><em>What is a sampling distribution?</em></strong></p>
<p>The experiment we happen to conduct yields an estimate of the average treatment effect, but in a different randomization, our estimate might have been different.</p>
<ul>
<li>Sampling distribution refers to the set of estimates that could have been generated by every possible random assignment.</li>
<li>The standard error is a measure of the spread of this distribution.</li>
<li>Good news: Under the central limit theorem, this distribution approximates the shape of a normal distribution when there are sufficient observations.
<ul>
<li>Why is this good news? Going to help us estimate uncertainty.</li>
</ul></li>
</ul>
<section id="standard-error-of-the-mean" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="standard-error-of-the-mean"><span class="header-section-number">4.1.1</span> Standard Error of the Mean</h3>
<p>The population mean and variance are <span class="math inline">\(\mu_y\)</span> and <span class="math inline">\(\sigma^2_y\)</span> for some variable <span class="math inline">\(Y\)</span> and <span class="math inline">\(\sigma_y\)</span> is the standard deviation. We want to know the variability of our sample mean <span class="math inline">\(\bar{Y}\)</span>.</p>
<p>Well we already know the mean of our sample mean (<span class="math inline">\(\bar{Y}\)</span>) is the population mean <span class="math inline">\((\mu_y)\)</span>:</p>
<span class="math display">\[\begin{align*}
E(\bar{Y}) &amp;= E[\frac{1}{N}\sum_{i=1}^{N} y_i] \\
&amp;= \frac{1}{N}*[E(y_1) + E(y_2) + ... + E(y_N)]\\
&amp;= \frac{1}{N}*N\mu_y\\
&amp;= \mu_y
\end{align*}\]</span>
<p>What about the variance of <span class="math inline">\(\bar{Y}\)</span>? We call the variance of our population mean: <span class="math inline">\(\sigma^2\)</span>. </p>
<span class="math display">\[\begin{align*}
Var(\bar{Y}) &amp;= Var[\frac{1}{N}\sum_{i=1}^{N} y_i] \\
&amp;= \frac{1}{N^2}*[Var(y_1) + Var(y_2) + ... + Var(y_N)]\\
&amp;= \frac{1}{N^2}*N\sigma^2\\
&amp;= \frac{\sigma^2}{N}
\end{align*}\]</span>
<p>Then to get to the standard error, we take the square root:</p>
<span class="math display">\[\begin{align*}
&amp;= \frac{\sigma}{\sqrt{N}}
\end{align*}\]</span>
<p>We cannot observe the actual <span class="math inline">\(\sigma\)</span> so instead, we will follow the practice of using a “sample analogue.” In our case, this is <span class="math inline">\(s\)</span>, the sample standard deviation:</p>
<ul>
<li>So we have an <strong><em>estimate for the standard error of our sample mean</em></strong>:</li>
</ul>
<span class="math display">\[\begin{align*}
\widehat{SE}_m &amp;= \frac{s}{\sqrt{N}}\\
\end{align*}\]</span>
<p><strong><em>Computing the estimate of our standard error</em></strong></p>
<ol type="1">
<li>Take the standard deviation of our sample. Recall:</li>
</ol>
<span class="math display">\[\begin{align*}
s &amp;= \sqrt{\frac{1}{N-1} \sum_{i=1}^{N} (y_i -  \bar{y})^2 }\\
\end{align*}\]</span>
<ol start="2" type="1">
<li>Divide by the square root of the sample size.</li>
</ol>
<span class="math display">\[\begin{align*}
\widehat{SE}_m &amp;= \frac{s}{\sqrt{N}}\\
\end{align*}\]</span>
<p><strong><em>Example</em></strong></p>
<p>What’s our estimate for the mean and standard error for feeling thermometer scores toward liberals?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 1. Take standard deviation</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>st.dev.fts <span class="ot">&lt;-</span> <span class="fu">sd</span>(fts)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 2. Divide by square root of sample size</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>se.fts <span class="ot">&lt;-</span> st.dev.fts<span class="sc">/</span><span class="fu">sqrt</span>(<span class="fu">length</span>(fts))</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>se.fts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10.44329</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Alternative</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="fu">var</span>(fts)<span class="sc">/</span><span class="fu">length</span>(fts))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10.44329</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="do">## What's the mean?</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(fts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 67.8</code></pre>
</div>
</div>
</section>
<section id="standard-error-for-a-difference-in-means" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="standard-error-for-a-difference-in-means"><span class="header-section-number">4.1.2</span> Standard error for a difference in means</h3>
<p>So we have an estimate for the standard error of our sample mean: But often we want the standard error of a <strong>difference</strong> in means, correspondig to the uncertainty of <span class="math inline">\(\widehat{ATE}\)</span>.</p>
<p>When we take the difference in variances from two independent samples, we add their variances:</p>
<span class="math display">\[\begin{align*}
\widehat{SE}_{d-i-m} &amp;= \sqrt{\frac{\widehat{Var}(Y_i(1))}{m} + \frac{\widehat{Var}(Y_i(0))}{N-m}}\\
\end{align*}\]</span>
<p>Note: Let’s inspect this formula. What does it tell us about when the standard error will be larger/smaller?</p>
<ul>
<li>Gives us insight into designs with blocking, matched pairs</li>
</ul>
</section>
</section>
<section id="confidence-intervals" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="confidence-intervals"><span class="header-section-number">4.2</span> Confidence Intervals</h2>
<ol type="1">
<li><p>Take a sample statistic (e.g.,<span class="math inline">\(\bar{Y}\)</span>)</p></li>
<li><p>Set a test value. A common one is <span class="math inline">\(\alpha = 0.05\)</span></p></li>
<li><p>Find the critical value associated with the test level. Example:</p></li>
</ol>
<span class="math display">\[\begin{align*}
z_{crit (1-\alpha/2)} &amp;= 1.96\\
\end{align*}\]</span>
<ol start="4" type="1">
<li>Multiply the critical value by the standard error of your statistic, and add and subtract from the statistic</li>
</ol>
<span class="math display">\[\begin{align*}
CI &amp;= \bar{Y} +/- crit.value*\widehat{SE}_{\bar{Y}}\\
\end{align*}\]</span>
<p>Careful when interpreting CI’s: note that the interval may vary from experiment to experiment, while the parameter stays fixed.</p>
<p><strong><em>Example computing confidence intervals</em></strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>m.fts <span class="ot">&lt;-</span> <span class="fu">mean</span>(fts)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="do">## What's our test level? .05</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>alpha <span class="ot">&lt;-</span> .<span class="dv">05</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="do">## critical value for normal distribution</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>crit.z <span class="ot">&lt;-</span> <span class="fu">qnorm</span>(<span class="dv">1</span><span class="sc">-</span> alpha<span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="do">## critical value for t-distribution</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>crit.t <span class="ot">&lt;-</span> <span class="fu">qt</span>(<span class="dv">1</span><span class="sc">-</span> alpha<span class="sc">/</span><span class="dv">2</span>, <span class="at">df =</span> (<span class="fu">length</span>(fts)<span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="do">## Confidence interval using t-distribution</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>ci.ub <span class="ot">&lt;-</span> m.fts <span class="sc">+</span> crit.t<span class="sc">*</span>se.fts</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>ci.lb <span class="ot">&lt;-</span> m.fts <span class="sc">-</span> crit.t<span class="sc">*</span>se.fts</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(ci.lb, ci.ub) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 44.17565 91.42435</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Alternative using the R t.test function</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>t.testfts <span class="ot">&lt;-</span> <span class="fu">t.test</span>(fts)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>t.testfts<span class="sc">$</span>conf.int[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 44.17565 91.42435</code></pre>
</div>
</div>
</section>
<section id="hypothesis-tests" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="hypothesis-tests"><span class="header-section-number">4.3</span> Hypothesis Tests</h2>
<p>Generally, we want to actually test hypotheses. We will use the null hypothesis testing framework. In this framework, we collect evidence to reject or fail to reject a naive starting assumption: the null hypothesis.</p>
<p>Typical setup for two-sample test.</p>
<ul>
<li>Null hypotheis: <span class="math inline">\(H_o\)</span>: <span class="math inline">\(\mu_{Y(1)} = \mu_{Y(0)}\)</span></li>
<li>Alternative hypothesis: <span class="math inline">\(H_a\)</span>: <span class="math inline">\(\mu_{Y(1)} \neq \mu_{Y(0)}\)</span>;
<ul>
<li>or <span class="math inline">\(H_a\)</span>: <span class="math inline">\(\mu_{Y(1)} &gt; \mu_{Y(0)}\)</span> or <span class="math inline">\(H_a\)</span>: <span class="math inline">\(\mu_{Y(1)} &lt; \mu_{Y(0)}\)</span></li>
</ul></li>
</ul>
<p>Review: Let’s say we do a two-sided test and get a p-value from our t-test of 0.003. What should we conclude?</p>
<ul>
<li>Wait, what’s a p-value? How should we interpret this p-value? (pg. 64, Gerber and Green)</li>
</ul>
<section id="t-tests" class="level3" data-number="4.3.1">
<h3 data-number="4.3.1" class="anchored" data-anchor-id="t-tests"><span class="header-section-number">4.3.1</span> t-tests</h3>
<p>A common implementation of hypothesis tests for comparing averages of two groups is the t-test.</p>
<p>Single population <span class="math display">\[\begin{align*}
t &amp;= \frac{\bar{X} - \mu_o}{\widehat{SE}_m}\\
\end{align*}\]</span></p>
<p>Two populations</p>
<span class="math display">\[\begin{align*}
t &amp;= \frac{(\bar{X_1} - \bar{X_0})- (\mu_1 - \mu_0)}{\widehat{SE}_{d-i-m}}\\
\end{align*}\]</span>
<p>In each case, we standardize our estimates according to the student’s t-distribution. We look to see just how extreme our t statistic is. t is our test statistic, a ratio between the size of the difference in means over the variability in the underlying data, represented by the standard error. <a href="https://blog.minitab.com/en/adventures-in-statistics-2/understanding-t-tests-t-values-and-t-distributions">Here</a> is a relatively accessible summary of t values.</p>
</section>
<section id="p-values" class="level3" data-number="4.3.2">
<h3 data-number="4.3.2" class="anchored" data-anchor-id="p-values"><span class="header-section-number">4.3.2</span> p-values</h3>
<p><img src="images/tdist.png" class="img-fluid" style="width:70.0%"></p>
<p>The p-value asks: What is the probability of getting a result this extreme or more extreme “by chance”/“if the null were true”? In a world where the null is true, we still might not get a t=0 in every sample. The t-distribution represents the range of t-values we might expect to see with some probability under the assumption the null is true. We need to quantify how likely it would be to get our t-statistic in this world where the null is true.</p>
<ul>
<li>Lower-tailed test, p-value <span class="math inline">\(= Pr(T &lt; t | H_o\)</span> is true)</li>
<li>Upper-tailed test, p-value <span class="math inline">\(= Pr(T &gt; t | H_o\)</span> is true)</li>
<li>Two-sided test is specified by: p-value <span class="math inline">\(= 2 * P(T &gt; |t| \hspace{1mm} | H_o\)</span> is true)</li>
</ul>
<p>We primarily use two-sided tests. To get the p-value, we need the degrees of freedom because the t-distribution varies somewhat in shape according to the degrees of freedom, which are primarily a function of the sample size. Degrees of freedom govern how thick the tails of the distribution are, which can influence and increase the size of the p-value. For one sample tests, it is N-1. For two-sample t-tests, the degrees of freedom calculation can be more complicated.</p>
<p>If we use the Welch calculation for unequal variances, which is the default setting in the R <code>t.test</code> function it is: df<span class="math inline">\(=\frac{\widehat{SE}^4}{ \frac{\widehat{Var}(Y_i(1))^2}{m^2(m-1)} + {\frac{\widehat{Var}(Y_i(0))^2}{(N-m)^2(N-m-1)}}}\)</span>.</p>
<ul>
<li>Fortunately, the <code>t.test</code> function in R will calculate that for you.</li>
</ul>
</section>
</section>
<section id="empirical-application" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="empirical-application"><span class="header-section-number">4.4</span> Empirical Application</h2>
<p>We will use data from the following experiment: “Social Exclusion and Political Identity: The Case of Asian American Partisanship” by Alexander Kuo, Neil Malhotra, and Cecilia Mo (2016). The data set based on authors’ replication file <a href="https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/GMWOY6">here</a></p>
<ul>
<li>Research Question: Do feelings of social exclusion lead Asians to develop more negative feelings toward the Republican Party?
<ul>
<li>Sample: 114: 61 self-reported Asian, 53 self-reported white</li>
<li>Treatment: Manipulate feelings of social exclusion.</li>
<li>Outcome: Difference in views toward Democratic vs.&nbsp;Republican Party
<ul>
<li>Close-mindedness, ignorance, represent interests, likes/dislikes, feeling thermometer, party ID, and the average of these six</li>
</ul></li>
</ul></li>
</ul>
<p>Let’s put this in the potential outcomes framework.</p>
<ul>
<li>For a given unit <span class="math inline">\(i\)</span> what are the potential outcomes we are interested in?</li>
<li>What is the <span class="math inline">\(\tau_i\)</span> we are interested in?</li>
<li>How are we going to estimate it?</li>
</ul>
<section id="treatment" class="level3" data-number="4.4.1">
<h3 data-number="4.4.1" class="anchored" data-anchor-id="treatment"><span class="header-section-number">4.4.1</span> Treatment</h3>
<p>For those in the treatment group, a white female assistant to the research team says, “I’m sorry; I forgot that this study is only for US citizens. Are you a US citizen? I cannot tell.” If the subject was a US citizen, the assistant was instructed to say “OK, go ahead” and have the respondent start the survey; if the subject was not a US citizen, the assistant was instructed to pause and then say “it’s OK, go ahead.” Subjects then completed an online survey of their political attitudes.</p>
<style>
p.comment {
background-color: #DBDBDB;
padding: 10px;
border: 1px solid black;
margin-left: 25px;
border-radius: 5px;
font-style: italic;
}

</style>
<p><strong><em>Is this treatment a good treatment?</em></strong> Use the principles we discussed last section to evaluate this implementation.</p>
<p class="comment">
</p><p>Your ideas …</p>
<p></p>
</section>
<section id="analysis" class="level3" data-number="4.4.2">
<h3 data-number="4.4.2" class="anchored" data-anchor-id="analysis"><span class="header-section-number">4.4.2</span> Analysis</h3>
<p>Let’s load the data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(foreign)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>exclusion <span class="ot">&lt;-</span> <span class="fu">read.dta</span>(<span class="st">"data/exclusion.dta"</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Explore data</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="do">## How many subjects?</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="do">## How many Asian vs. White subjects</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="do">## What proportion of subjects were treated?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Let's relabel the names to something sensible</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(exclusion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "v1"            "v2"            "v3"            "v4"           
[5] "v5"            "v6"            "study2_avg"    "treatment_cit"
[9] "asiant"       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="do">## v1 is difference between dem - rep in closed mindedness</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(exclusion)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"clmindeddr"</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="do">## v2 is difference between dem - rep in ignorance</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(exclusion)[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="st">"ingnorantdr"</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="do">## What if you don't want to have to find the number?</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(exclusion)[<span class="fu">names</span>(exclusion) <span class="sc">==</span> <span class="st">"v3"</span>] <span class="ot">&lt;-</span> <span class="st">"netlikesdr"</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(exclusion)[<span class="dv">4</span>] <span class="ot">&lt;-</span> <span class="st">"piddr"</span> <span class="co"># pid</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(exclusion)[<span class="dv">5</span>] <span class="ot">&lt;-</span> <span class="st">"ftdr"</span> <span class="co"># feeling thermometer</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(exclusion)[<span class="dv">6</span>] <span class="ot">&lt;-</span> <span class="st">"repdr"</span> <span class="co"># represents interests</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Difference in means for the average</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Overall</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>d.i.m <span class="ot">&lt;-</span> <span class="fu">mean</span>(exclusion<span class="sc">$</span>study2_avg[exclusion<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">1</span>]) <span class="sc">-</span>  </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>               <span class="fu">mean</span>(exclusion<span class="sc">$</span>study2_avg[exclusion<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">0</span>])</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Among whites</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>diff.whites <span class="ot">&lt;-</span> <span class="fu">mean</span>(exclusion<span class="sc">$</span>study2_avg[exclusion<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>                                     exclusion<span class="sc">$</span>asiant <span class="sc">==</span> <span class="dv">0</span>]) <span class="sc">-</span>  </span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>               <span class="fu">mean</span>(exclusion<span class="sc">$</span>study2_avg[exclusion<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>                                          exclusion<span class="sc">$</span>asiant <span class="sc">==</span> <span class="dv">0</span> ])</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="do">## Among asians</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>diff.asians <span class="ot">&lt;-</span> <span class="fu">mean</span>(exclusion<span class="sc">$</span>study2_avg[exclusion<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>                                     exclusion<span class="sc">$</span>asiant <span class="sc">==</span> <span class="dv">1</span>]) <span class="sc">-</span>  </span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>               <span class="fu">mean</span>(exclusion<span class="sc">$</span>study2_avg[exclusion<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>                                          exclusion<span class="sc">$</span>asiant <span class="sc">==</span> <span class="dv">1</span> ])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We could also subset the data by race/ethnicity group. Let’s do that and then calculate our t-test and uncertainty by hand and using the R functions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Subset data for only Asian respondents</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>asians <span class="ot">&lt;-</span> <span class="fu">subset</span>(exclusion, asiant <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="do">## t-test by hand for sample of Asian Respondents</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Calculating Standard error</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Get N for each group</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>n.asianst1 <span class="ot">&lt;-</span> <span class="fu">length</span>(asians<span class="sc">$</span>study2_avg[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">1</span>])</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>n.asianst0 <span class="ot">&lt;-</span> <span class="fu">length</span>(asians<span class="sc">$</span>study2_avg[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">0</span>])</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="do">## Get variance for each group</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>v.asianst1 <span class="ot">&lt;-</span> <span class="fu">var</span>(asians<span class="sc">$</span>study2_avg[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">1</span>])</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>v.asianst0 <span class="ot">&lt;-</span> <span class="fu">var</span>(asians<span class="sc">$</span>study2_avg[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">0</span>])</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="do">## Standard error</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>se.diffasians <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(v.asianst1<span class="sc">/</span>n.asianst1 <span class="sc">+</span> v.asianst0<span class="sc">/</span>n.asianst0)</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a><span class="do">## t-statistic</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>t.diffasians <span class="ot">&lt;-</span> diff.asians<span class="sc">/</span>se.diffasians</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a><span class="do">## Degrees of freedom</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>t.df <span class="ot">&lt;-</span> (se.diffasians)<span class="sc">^</span><span class="dv">4</span><span class="sc">/</span></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>  (v.asianst1<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span>(n.asianst1<span class="sc">^</span><span class="dv">2</span><span class="sc">*</span>(n.asianst1 <span class="sc">-</span> <span class="dv">1</span>)) </span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>   <span class="sc">+</span> v.asianst0<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span>(n.asianst0<span class="sc">^</span><span class="dv">2</span><span class="sc">*</span>(n.asianst0 <span class="sc">-</span> <span class="dv">1</span>)))</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a><span class="do">## p-value for two-sided test</span></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>p.asians <span class="ot">&lt;-</span> (<span class="dv">1</span><span class="sc">-</span> <span class="fu">pt</span>(<span class="fu">abs</span>(t.diffasians), t.df))<span class="sc">*</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We could visualize this according to the t-distribution with degrees of freedom equal to <code>t.df</code>: 50.73481 and our t-value of 2.196597 in the dashed red line.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="04-Uncertainty_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>To get our p-value in a two-sided test, we compute the area to the right of this and to the left of its corresponding value on the opposite side of the distribution (equivalently due to the symmetric nature of the distribution, we can take 2 <span class="math inline">\(\times\)</span> either area). This area represents a probability, as the total area under the curve sums to 1.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="04-Uncertainty_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>A shortcut for computing the results is to use the R function. When learning a new function, you can access the help files in R by typing <code>?FUN</code> into the console. Example: <code>t.test</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="do">## t-test the quick way!</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>asians.t <span class="ot">&lt;-</span> <span class="fu">t.test</span>(asians<span class="sc">$</span>study2_avg[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">1</span>],</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>                   asians<span class="sc">$</span>study2_avg[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">0</span>])</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>whites <span class="ot">&lt;-</span> <span class="fu">subset</span>(exclusion, asiant <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>whites.t <span class="ot">&lt;-</span> <span class="fu">t.test</span>(whites<span class="sc">$</span>study2_avg[whites<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">1</span>],</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>                   whites<span class="sc">$</span>study2_avg[whites<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>What are our conclusions about the hypothesis tests?</p>
</section>
<section id="heterogeneous-treatment-effects" class="level3" data-number="4.4.3">
<h3 data-number="4.4.3" class="anchored" data-anchor-id="heterogeneous-treatment-effects"><span class="header-section-number">4.4.3</span> Heterogeneous Treatment Effects</h3>
<p>The researchers believe that the size of the treatment effects will be different depending on the race/ethnicity of the participant.</p>
<ul>
<li>Should we compare the treatment effects among Asians vs.&nbsp;whites?
<ul>
<li>If we do, can we say that being Asian caused a different reaction to microaggressions than being white?</li>
<li>Overall, what are the limits of studying heterogeneity?</li>
</ul></li>
</ul>
<p>One approach to detecting a heterogeneous treatment effect is to use an interaction in a linear regression model.</p>
<p>As we discussed in the second section, when you have a treatment categorical variable, the regression coefficient <span class="math inline">\(\hat \beta\)</span> represents the difference in means.</p>
<ul>
<li>When we interact this treatment indicator with a second variable, it will tell us how much the treatment effect varies according to the levels of that second variable.</li>
</ul>
<p>Let’s start by calculating our treatment effects with the regression approach.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Linear regression lm(y ~ x, data = nameofyourdataframe)</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>asians.r <span class="ot">&lt;-</span> <span class="fu">lm</span>(study2_avg <span class="sc">~</span> treatment_cit, <span class="at">data =</span> asians)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(asians.r)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>whites.r <span class="ot">&lt;-</span> <span class="fu">lm</span>(study2_avg <span class="sc">~</span> treatment_cit, <span class="at">data =</span> whites)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(whites.r)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Why is the p-value slightly different here?</p>
<details>
<summary>
Try on your own, then expand for the answer.
</summary>
<p>We do not assume our groups have equal variances when we do the t-test, but regression relies on a pooled variance estimator, which differs slightly. We can recover the p-value in two ways.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Indicate var.equal=T</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>asians.t.p <span class="ot">&lt;-</span> <span class="fu">t.test</span>(asians<span class="sc">$</span>study2_avg[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">1</span>],</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>                   asians<span class="sc">$</span>study2_avg[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">0</span>], <span class="at">var.equal =</span> T)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>asians.t.p<span class="sc">$</span>p.value</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.02951252</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="do">## By hand, use pooled estimator for variance/standard error/degrees of freedom</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>pooled.var <span class="ot">&lt;-</span> ((n.asianst1 <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">*</span> v.asianst1 <span class="sc">+</span> </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>                 (n.asianst0 <span class="sc">-</span> <span class="dv">1</span>)<span class="sc">*</span>v.asianst0)<span class="sc">/</span> (n.asianst0 <span class="sc">+</span> n.asianst1 <span class="sc">-</span><span class="dv">2</span>)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>pooled.se <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(pooled.var) <span class="sc">*</span> <span class="fu">sqrt</span>( <span class="dv">1</span><span class="sc">/</span>n.asianst0 <span class="sc">+</span> <span class="dv">1</span><span class="sc">/</span>n.asianst1)</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>pooled.t <span class="ot">&lt;-</span> diff.asians<span class="sc">/</span>pooled.se</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>pooled.p <span class="ot">&lt;-</span> (<span class="dv">1</span><span class="sc">-</span> <span class="fu">pt</span>(<span class="fu">abs</span>(pooled.t), (n.asianst0 <span class="sc">+</span> n.asianst1 <span class="sc">-</span><span class="dv">2</span>)))<span class="sc">*</span><span class="dv">2</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>pooled.p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.02951252</code></pre>
</div>
</div>
</details>
<p>Let’s now add the interaction term using the asterisk symbol:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Using an interaction</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>het.r <span class="ot">&lt;-</span> <span class="fu">lm</span>(study2_avg <span class="sc">~</span> treatment_cit <span class="sc">+</span> asiant </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>            <span class="sc">+</span> treatment_cit<span class="sc">*</span>asiant, <span class="at">data =</span> exclusion)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(het.r)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = study2_avg ~ treatment_cit + asiant + treatment_cit * 
    asiant, data = exclusion)

Residuals:
     Min       1Q   Median       3Q      Max 
-0.52680 -0.07572  0.02925  0.09661  0.32821 

Coefficients:
                     Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)           0.67267    0.02976  22.606   &lt;2e-16 ***
treatment_cit        -0.03200    0.04517  -0.708   0.4802    
asiant               -0.07654    0.04244  -1.803   0.0741 .  
treatment_cit:asiant  0.12517    0.06153   2.034   0.0443 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.163 on 110 degrees of freedom
Multiple R-squared:  0.04907,   Adjusted R-squared:  0.02314 
F-statistic: 1.892 on 3 and 110 DF,  p-value: 0.1351</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="do">## How do we interpret each coefficient?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We now have a t-test for the interaction term, specifically. Be mindful that when you include an interaction term in a regression model, it changes the way we interpret the two other “main effects.”</p>
</section>
<section id="difference-in-proportions" class="level3" data-number="4.4.4">
<h3 data-number="4.4.4" class="anchored" data-anchor-id="difference-in-proportions"><span class="header-section-number">4.4.4</span> Difference in Proportions</h3>
<p>If we have a proportion as an average outcome instead of a mean, we may wish to adjust how we calculate uncertainty to better reflect the nature of a dichotomous outcome variable.</p>
<p>When we are comparing two proportions, we can use the <code>prop.test</code> function in R, which will adjust this calculation for us.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Create a proportion variable where 1=dem, 0=rep</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(exclusion<span class="sc">$</span>piddr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
                0 0.200000002980232 0.400000005960464 0.600000023841858 
                2                 7                12                28 
0.800000011920929                 1 
               35                30 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>asians<span class="sc">$</span>dem <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(asians<span class="sc">$</span>piddr <span class="sc">&gt;</span> .<span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Calculate difference in proportions by hand</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>m1.asians <span class="ot">&lt;-</span> <span class="fu">mean</span>(asians<span class="sc">$</span>dem[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">1</span>])</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>m0.asians <span class="ot">&lt;-</span> <span class="fu">mean</span>(asians<span class="sc">$</span>dem[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">0</span>])</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>m1.asians <span class="sc">-</span> m0.asians</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.1163793</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Use prop.test: </span><span class="al">NOTE</span><span class="do"> THE DIFFERENT SYNTAX FROM t.test</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="do">## x is the "number of successes" i.e., number of 1's for each group</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="do">## n is sample size for each group</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>p.test.asians <span class="ot">&lt;-</span> <span class="fu">prop.test</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="fu">sum</span>(asians<span class="sc">$</span>dem[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">1</span>]),</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>                <span class="fu">sum</span>(asians<span class="sc">$</span>dem[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">0</span>])), </span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">n =</span> <span class="fu">c</span>(<span class="fu">length</span>(asians<span class="sc">$</span>dem[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">1</span>]), </span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">length</span>(asians<span class="sc">$</span>dem[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">0</span>])))</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="do">## Note if you were to run the standard t-test, </span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a><span class="do">## the difference would be the same but calculation of uncertainty is different</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(asians<span class="sc">$</span>dem[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">1</span>], </span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>       asians<span class="sc">$</span>dem[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Welch Two Sample t-test

data:  asians$dem[asians$treatment_cit == 1] and asians$dem[asians$treatment_cit == 0]
t = 1.1599, df = 52.547, p-value = 0.2514
alternative hypothesis: true difference in means is not equal to 0
95 percent confidence interval:
 -0.08491716  0.31767578
sample estimates:
mean of x mean of y 
0.8750000 0.7586207 </code></pre>
</div>
</div>
<p>What do you conclude about the test?</p>
</section>
</section>
<section id="randomization-inference" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="randomization-inference"><span class="header-section-number">4.5</span> Randomization Inference</h2>
<p>Null Hypothesis of No Average Effect vs.&nbsp;Sharp Null Hypothesis of No Effect (pg. 62)</p>
<ul>
<li><span class="math inline">\(\mu_{Y(1)} = \mu_{Y(0)}\)</span> vs.</li>
<li><span class="math inline">\(Y_i(1) = Y_i(0)\)</span> for all i</li>
</ul>
<p>What are the key differences here?</p>
<ul>
<li>The treatment has no effect: <span class="math inline">\(Y_i(1) = Y_i(0)\)</span> for all <span class="math inline">\(i\)</span>.</li>
<li>Suppose we are in the world where the sharp null is true.</li>
<li>Let’s simulate what the sampling distribution under that null distribution looks like.</li>
<li>We assess the distribution relative to the ATE we observe under the assignment in our sample</li>
<li>How likely is it we would observe our ATE, given the null distribution?</li>
</ul>
<p><strong><em>Example</em></strong> Here is our data for 7 observations, where 4 are assigned to treatment, 3 to control.</p>
<p><img src="images/ri1.png" class="img-fluid"></p>
<p>Our estimate for the average treatment effect is <span class="math inline">\(6-3 = 3.\)</span></p>
<p>Suppose the sharp null is true: <span class="math inline">\(Y_i(1) = Y_i(0)\)</span>. This means <span class="math inline">\(\tau_i\)</span> = 0 for all <span class="math inline">\(i.\)</span></p>
<p><img src="images/ri2.png" class="img-fluid"></p>
<p>In our null world, if we know <span class="math inline">\(Y_i\)</span> for each <span class="math inline">\(i\)</span> and <span class="math inline">\(\tau_i\)</span> for each <span class="math inline">\(i\)</span>, we can solve for the missing potential outcome.</p>
<p><img src="images/ri3.png" class="img-fluid"></p>
<p>For randomization inference, what we do now is simulate possible randomizations– what if a different set of observations were treated each time?</p>
<p><img src="images/ri4.png" class="img-fluid"></p>
<p>What is our average treatment effect for d? 18/4 - 15/3 = -.5</p>
<p>Repeat for all (or a lot of) possible permutations of d.&nbsp;This gives us an implied null distribution of the average treatment effect under the sharp null. Note: it won’t always be zero. It will be a distribution around zero. We will compare how extreme our observed estimate of the average treatment effect is compared to this distribution under the null.</p>
<p><strong><em>Empirical example with social exclusion experiment</em></strong></p>
<p>Alex Coppock has updated the randomization inference package to <code>ri2</code> in R. More on this package is available <a href="http://alexandercoppock.com/ri2/index.html">here</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="do">## install.packages("ri2", dependencies=T)</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ri2)</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Declare randomization</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>declaration <span class="ot">&lt;-</span> <span class="fu">declare_ra</span>(<span class="at">N=</span><span class="fu">nrow</span>(asians), <span class="at">prob=</span>.<span class="dv">5</span>)</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Estimate the average treatment effect</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1215</span>)</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>ri2_out <span class="ot">&lt;-</span> <span class="fu">conduct_ri</span>(</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> study2_avg <span class="sc">~</span> treatment_cit,</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">assignment =</span> <span class="st">"treatment_cit"</span>,</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">declaration =</span> declaration,</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">sharp_hypothesis =</span> <span class="dv">0</span>,</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> asians</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Plot and compare distribution to observed ATE</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ri2_out)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="04-Uncertainty_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Summarize Output</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ri2_out)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           term   estimate two_tailed_p_value
1 treatment_cit 0.09317187              0.033</code></pre>
</div>
</div>
<p>We can manually see what the package is doing by counting how many of the simulated estimates from the empirical distribution of the sharp null hypothesis were more extreme than our estimate from the study. Note that in this case, our p-value is very similar to the t-test.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>estimate <span class="ot">&lt;-</span> <span class="fu">tidy</span>(ri2_out)<span class="sc">$</span>estimate</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>nsims <span class="ot">&lt;-</span> <span class="fu">length</span>(ri2_out<span class="sc">$</span>sims_df<span class="sc">$</span>est_sim)</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>simstimates <span class="ot">&lt;-</span> ri2_out<span class="sc">$</span>sims_df<span class="sc">$</span>est_sim</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Two-tailed p-value</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(simstimates[<span class="fu">abs</span>(simstimates) <span class="sc">&gt;=</span> <span class="fu">abs</span>(estimate)])<span class="sc">/</span>nsims</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.033</code></pre>
</div>
</div>
</section>
<section id="a-note-on-expectations-and-variance" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="a-note-on-expectations-and-variance"><span class="header-section-number">4.6</span> A Note on Expectations and Variance</h2>
<p>This section includes definitions of expectation and variance and walks through more deliberately how we derive what the variance of a mean is (which we need for standard errors!).</p>
<ul>
<li>This <a href="https://www.youtube.com/watch?v=7mYDHbrLEQo">video</a> walks you through the steps in the slides from Week 3 Uncertainty with very similar notation. Below, we go through a more elongated version of the derivation that starts from the basic definition of the variance of a random variable.</li>
</ul>
<p>We are going to exploit a few “rules” of expectations and variance as we go through the derivation.</p>
<ul>
<li>The expectation of a sum is the sum of the expectations: <span class="math inline">\(E(X + Y) = E(X) + E(Y)\)</span></li>
<li>The expectation of a constant (<span class="math inline">\(a\)</span>) is the constant.The expectation of a constant multiplied by a random variable is <span class="math inline">\(E(aX) = aE(X)\)</span></li>
<li>When our observations are independent (which we are generally assuming), the variance of the sum is equal to the sum of the variance: <span class="math inline">\(Var(\sum_{i=1}^N X_i) = \sum_{i=1}^N Var(X_i)\)</span></li>
<li>When we pull a constant outside the variance operator, we square it: <span class="math inline">\(Var(a * X) = a^2Var(X)\)</span>
<ul>
<li>The steps below for deriving the standard error show why this squaring happens.</li>
</ul></li>
<li>The variance of a random variable is: <span class="math inline">\(Var(X) = E[(X - \mu)^2]\)</span> where <span class="math inline">\(\mu\)</span> refers to the expected value or ``population mean” of the random variable (i.e., <span class="math inline">\(E[(X - \mu)^2] = E[(X - E(X))^2]\)</span>).</li>
</ul>
<p><strong><em>Expectation and Variance of a Random Variable</em></strong></p>
<p>The expected value of a random variable (e.g., <span class="math inline">\(X\)</span>) is the average value random variable weighted by its probability of ocurrence. We write it as <span class="math inline">\(E(X)\)</span> or sometimes <span class="math inline">\(\mu_x\)</span>.</p>
<p>The variance of a random variable is a measure of spread (written as <span class="math inline">\(Var(X)\)</span> or <span class="math inline">\(\sigma_x^2\)</span>): the degree to which values of the random variable differ from its expected value.</p>
<ul>
<li>The square root of the variance is the standard deviation, sometimes written as <span class="math inline">\(\sigma_x\)</span>, a measure of spread describing the typical deviation from the expected value.</li>
</ul>
<p>OK: The variance of a random variable is defined as the expected squared deviation from the expected value. Let’s do this for a random variable <span class="math inline">\(X_i\)</span> (i.e., from <span class="math inline">\(E(X_i)\)</span> or <span class="math inline">\(\mu\)</span>):</p>
<span class="math display">\[\begin{align*}
Var(X_i) &amp;= E[(X_i - \mu)^2]
%\\
%&amp;= E[X_i^2 - 2 X_i \mu + \mu^2]&amp;&amp; \text{ 1) foil the squared difference}\\
%&amp;=E(X_i^2) - 2* E(X_i)*E(X_i) + [E(X_i)]^2 &amp;&amp; \text{ 2) Move expectation inside, rewrite $\mu$ as $E%(X_i)$}\\
%&amp;= E(X_i^2) - [E(X_i)]^2 &amp;&amp; \text{ 3) Subtract like terms}
\end{align*}\]</span>
<p>The square root of this quantity is the standard deviation.</p>
<p><strong><em>Expectation and Variance of a Mean</em></strong></p>
<p>We now consider our mean (e.g., <span class="math inline">\(\bar{X}\)</span>) as our random variable and will derive its variance. Why?</p>
<ul>
<li>Because this gives us the variability in our sampling distribution (how our mean varies) and will get us to our standard error.</li>
<li>Recall the standard error is simply the standard deviation of our sampling distribution i.e., the square root of the variance of our sample mean as we think about how the mean varies over all possible randomizations.</li>
</ul>
<p>Recall: The expected value of our sample mean (<span class="math inline">\(E(\bar{X})\)</span>) can be written as:</p>
<span class="math display">\[\begin{align*}
E(\bar{X}) &amp;= \frac{1}{N} \sum_{i=1}^N E(X_i)\\
\end{align*}\]</span>
<p>So we now start with <span class="math inline">\(Var(\bar{X})\)</span> instead of <span class="math inline">\(Var(X_i)\)</span>. However, our variance is still defined as a squared deviation. This time it is the squared deviation of a sample mean from the expected value of the sample mean. <span class="math display">\[\begin{align*}
Var(\bar{X}) &amp;= E[(\bar{X} - E(\bar{X}))^2]\\
&amp;= E[(\frac{1}{N} \sum_{i=1}^N X_i - E(\frac{1}{N} \sum_{i=1}^N X_i))^2] &amp;&amp; \text{rewrite $\bar{X}$}\\
&amp;= E[(\frac{1}{N} [\sum_{i=1}^N X_i - E( \sum_{i=1}^N X_i)])^2] &amp;&amp; \text{pull out $\frac{1}{N}$}\\
&amp;= E[\frac{1}{N^2}(\sum_{i=1}^N X_i - E( \sum_{i=1}^N X_i))^2] &amp;&amp; \text{Note: the squaring of constant}\\
&amp;= \frac{1}{N^2}E[(\sum_{i=1}^N X_i - E( \sum_{i=1}^N X_i))^2]&amp;&amp; \text{Move constant outside expectation}\\
&amp;= \frac{1}{N^2} Var(\sum_{i=1}^N X_i) &amp;&amp; \text{Rewrite as variance of the sum  of $X_i$}\\
&amp;=  \frac{1}{N^2}\sum_{i=1}^N Var(X_i) &amp;&amp; \text{Apply rule on variance of sum}\\
&amp;=  \frac{1}{N^2}*(Var(X_1) + Var(X_2) +...+ Var(X_N)) &amp;&amp; \text{Write out the sum}\\
&amp;=  \frac{1}{N^2}*N* \sigma^2 &amp;&amp; \text{Substitute our known $\sigma^2$ from above}\\
&amp;= \frac{\sigma^2}{N}
\end{align*}\]</span></p>
<p>Note: the square root of this is our standard deviation aka our standard error: <span class="math inline">\(\frac{\sigma}{\sqrt{N}}\)</span>. We cannot observe <span class="math inline">\(\sigma\)</span>, so we estimate this using the sample standard deviation <span class="math inline">\(s\)</span>. This will be useful, for example, if we want a standard error for the mean outcome in our treatment group.</p>
<p><strong><em>Variance of our Difference in Means</em></strong></p>
<p>Now we last want to quantify the variability in the sampling distribution for our difference in means (<span class="math inline">\(\bar{X}_1 - \bar{X}_0\)</span>) assuming our samples and observations are independent. The idea is that every possible randomization similarly generates a different estimate for the difference just as it does for any individual mean.</p>
<p>Well we just showed we know the variance of each mean separately:</p>
<ul>
<li><span class="math inline">\(Var(\bar{X_1}) = \frac{\sigma_1^2}{N_1}\)</span></li>
<li><span class="math inline">\(Var(\bar{X_0}) = \frac{\sigma_0^2}{N_0}\)</span></li>
</ul>
<p>Now we have to get the variance of our difference: <span class="math inline">\(Var(\bar{X}_1 - \bar{X}_0)\)</span>.</p>
<p>To do this, we exploit yet another rule for independent samples: that the variance of a difference is equal to the sum of the variances:</p>
<ul>
<li><span class="math inline">\(Var(\bar{X}_1 - \bar{X}_0) = Var(\bar{X}_1) + Var(\bar{X}_0)\)</span></li>
<li>The standard deviation is again the square root of this: <span class="math inline">\(\sqrt{Var(\bar{X}_1) + Var(\bar{X}_0)}\)</span></li>
</ul>
<p>Ok writing this out: <span class="math display">\[\begin{align*}
Var(\bar{X}_1 - \bar{X}_0) &amp;= Var(\bar{X}_1) + Var(\bar{X}_0)\\
&amp;= \frac{\sigma_1^2}{N_1} + \frac{\sigma_0^2}{N_0}
\end{align*}\]</span></p>
<p>Now if we want the standard error we get: <span class="math display">\[\begin{align*}
\sqrt{Var(\bar{X}_1 - \bar{X}_0)} &amp;= \sqrt{Var(\bar{X}_1) + Var(\bar{X}_0)}\\
&amp;= \sqrt{\frac{\sigma_1^2}{N_1} + \frac{\sigma_0^2}{N_0}}
\end{align*}\]</span></p>
<p>Like before, we use sample substitutes (<span class="math inline">\(s_1\)</span> and <span class="math inline">\(s_0\)</span>) where <span class="math inline">\(m\)</span> represents the number of units in the treatment and <span class="math inline">\(N-m\)</span>, the number of unites in the control (switching notation here to match the book):</p>
<span class="math display">\[\begin{align*}
\widehat{SE}_{d-i-m} &amp;= \sqrt{\frac{s^2_1}{m} + \frac{s^2_0}{N-m}}
\end{align*}\]</span>
<p>Note: this estimate of the standard error is considered conservative and is only appropriate when samples are independent. We will discuss alternative measures of variance.</p>
<ul>
<li>For example, when we use OLS to get out difference in means, we will use a slightly different “pooled variance estimator” where we assume <span class="math inline">\(\sigma_1^2 = \sigma_0^2\)</span>.
<ul>
<li>Here, the pooled sample variance is: <span class="math inline">\(s_{pooled}^2 = \frac{(n_1 -1)s^2_1 + (n_0-1)s^2_0}{(n_1 +n_0 -2)}\)</span></li>
<li>where the standard error is: <span class="math inline">\(\sqrt{s_{pooled}^2} * \sqrt{(\frac{1}{n_1}+\frac{1}{n_0})}\)</span></li>
</ul></li>
</ul>
</section>
<section id="equivalence-of-t-test-and-anova" class="level2" data-number="4.7">
<h2 data-number="4.7" class="anchored" data-anchor-id="equivalence-of-t-test-and-anova"><span class="header-section-number">4.7</span> Equivalence of t-test and ANOVA</h2>
<p>You may be familiar with ANOVA as a way to test for group differences. When you have two groups, the t-test and ANOVA are actually equivalent. Let’s convince ourselves of this.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 1) t-test where variances are assumed to be equal (often we leave this unequal, which adjusts for unequal variances)</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>t1 <span class="ot">&lt;-</span> <span class="fu">t.test</span>(asians<span class="sc">$</span>study2_avg[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">1</span>],</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>                   asians<span class="sc">$</span>study2_avg[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">0</span>],</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">var.equal=</span>T)</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 2) One-way anova</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="do">## create variable that is back out vs. stay out only</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>a1 <span class="ot">&lt;-</span> <span class="fu">aov</span>(study2_avg <span class="sc">~</span> treatment_cit, <span class="at">data =</span> asians)</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>a1.sum <span class="ot">&lt;-</span> <span class="fu">summary</span>(a1)</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a><span class="do">## In one-way ANOVA test, a significant p-value indicates that</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a><span class="do">## at least one of the group means are different, but we don’t know which </span></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a><span class="do">## pairs of groups are different.</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a><span class="do">## However, if we only have two groups, ANOVA reduces to a t-test</span></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 3) Also equivalent to simple regression</span></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>l1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(study2_avg <span class="sc">~</span> treatment_cit, <span class="at">data =</span> asians)</span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a><span class="do">## Prove to yourself the equivalence</span></span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a><span class="do">## 1) Compare p-values of the treatment effect in each case</span></span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a>t1<span class="sc">$</span>p.value</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.02951252</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>a1.sum[[<span class="dv">1</span>]]<span class="sc">$</span><span class="st">`</span><span class="at">Pr(&gt;F)</span><span class="st">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.02951252         NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(l1)<span class="sc">$</span>coefficients[<span class="dv">2</span>, <span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.02951252</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 2) Compare test-statistics</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Note it's the same F-statistic in ANOVA and lm</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(l1)<span class="sc">$</span>f</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    value     numdf     dendf 
 4.976264  1.000000 59.000000 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>a1.sum[[<span class="dv">1</span>]]<span class="sc">$</span><span class="st">`</span><span class="at">F value</span><span class="st">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4.976264       NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="do">## And woohoo! the f-statistic is actually equivalent to our t-stat^2</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="do">## (with two groups, sqrt(f) equals the absolute value of t)</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>t1<span class="sc">$</span>statistic<span class="sc">^</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       t 
4.976264 </code></pre>
</div>
</div>
<p>ANOVA and t-test diverge in estimates when you have more than 2 groups</p>
<ul>
<li>ANOVA tests if you have at least one sig. diff (a “joint test” of statistical sig)</li>
<li>t-tests are meant for pairwise comparisons of significance</li>
<li>BUT there are “post-hoc” anova tests to look at pairwise comparisons,</li>
<li>As there are multiple-testing corrections for t-tests
<ul>
<li>More on <a href="https://egap.org/resource/10-things-to-know-about-multiple-comparisons/">multiple testing adjustments</a></li>
</ul></li>
</ul>
</section>
<section id="comparing-different-types-of-tests" class="level2" data-number="4.8">
<h2 data-number="4.8" class="anchored" data-anchor-id="comparing-different-types-of-tests"><span class="header-section-number">4.8</span> Comparing different types of tests</h2>
<p>We have suggested that using a linear regression or a t-test result in the same difference-in-mean estimates with estimating average treatment effects.</p>
<p>There may be some slight differences in the uncertainty depending on how you specifiy the t-test.</p>
<p>A t-test generally uses this formula for standard errors which allows the variances to be unequal between the two groups <code>var.equal = F</code>. However, this is not the only way to estimate uncertainty when comparing two independent groups.</p>
<span class="math display">\[\begin{align*}
\widehat{SE}_{d-i-m} &amp;= \sqrt{\frac{s^2_1}{m} + \frac{s^2_0}{N-m}}
\end{align*}\]</span>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>asians.t <span class="ot">&lt;-</span> <span class="fu">t.test</span>(asians<span class="sc">$</span>study2_avg[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">1</span>],</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>                   asians<span class="sc">$</span>study2_avg[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">0</span>],</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">var.equal=</span>F)</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>asians.t<span class="sc">$</span>stderr</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.04241645</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="do">## by hand</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Get N for each group</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>n.asianst1 <span class="ot">&lt;-</span> <span class="fu">length</span>(asians<span class="sc">$</span>study2_avg[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">1</span>])</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>n.asianst0 <span class="ot">&lt;-</span> <span class="fu">length</span>(asians<span class="sc">$</span>study2_avg[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">0</span>])</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Get variance for each group</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>v.asianst1 <span class="ot">&lt;-</span> <span class="fu">var</span>(asians<span class="sc">$</span>study2_avg[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">1</span>])</span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>v.asianst0 <span class="ot">&lt;-</span> <span class="fu">var</span>(asians<span class="sc">$</span>study2_avg[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">0</span>])</span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a><span class="do">## Standard error</span></span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>se.diffasians <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(v.asianst1<span class="sc">/</span>n.asianst1 <span class="sc">+</span> v.asianst0<span class="sc">/</span>n.asianst0)</span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a>se.diffasians</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.04241645</code></pre>
</div>
</div>
<p>It is also common to use an assumption that the variances between groups are equal <code>var.equal = T</code>, in which case the variance is calculated using a “pooled” estimator.</p>
<span class="math display">\[\begin{align*}
\widehat{SE}_{d-i-m pooled} &amp;= \sqrt{\frac{(m-1)s^2_1 + (N -m-1)s^2_2}{N - 2}}*\sqrt{\frac{1}{m} + \frac{1}{N-m}}
\end{align*}\]</span>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>asians.t <span class="ot">&lt;-</span> <span class="fu">t.test</span>(asians<span class="sc">$</span>study2_avg[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">1</span>],</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>                   asians<span class="sc">$</span>study2_avg[asians<span class="sc">$</span>treatment_cit <span class="sc">==</span> <span class="dv">0</span>],</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">var.equal=</span>T)</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>asians.t<span class="sc">$</span>std.err</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="do">## By hand, use pooled estimator for variance/standard error/degrees of freedom</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>pooled.var <span class="ot">&lt;-</span> ((n.asianst1 <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">*</span> v.asianst1 <span class="sc">+</span> </span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>                 (n.asianst0 <span class="sc">-</span> <span class="dv">1</span>)<span class="sc">*</span>v.asianst0)<span class="sc">/</span> (n.asianst0 <span class="sc">+</span> n.asianst1 <span class="sc">-</span><span class="dv">2</span>)</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>pooled.se <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(pooled.var) <span class="sc">*</span> <span class="fu">sqrt</span>( <span class="dv">1</span><span class="sc">/</span>n.asianst0 <span class="sc">+</span> <span class="dv">1</span><span class="sc">/</span>n.asianst1)</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>pooled.se</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.04176698</code></pre>
</div>
</div>
<p>The pooled variance t-test and simple linear regression procedure will result in the same estimates of uncertainty.</p>
<span class="math display">\[\begin{align*}
\widehat{SE}_{\hat \beta } &amp;= \sqrt{\frac{1}{N-2} \times \frac{\sum (y_i - \hat y_i)^2}{\sum (x_i - \bar x)^2}}
\end{align*}\]</span>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>asians.fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(study2_avg <span class="sc">~</span> treatment_cit, <span class="at">data=</span>asians)</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Manual application of formula</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> asians<span class="sc">$</span>study2_avg</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>yhat <span class="ot">&lt;-</span> <span class="fu">fitted</span>(asians.fit)</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> asians<span class="sc">$</span>treatment_cit</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>xbar <span class="ot">&lt;-</span> <span class="fu">mean</span>(asians<span class="sc">$</span>treatment_cit)</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>N <span class="ot">&lt;-</span> n.asianst0 <span class="sc">+</span> n.asianst1</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>SSy <span class="ot">&lt;-</span> <span class="fu">sum</span>((y <span class="sc">-</span> yhat)<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>SSx <span class="ot">&lt;-</span> <span class="fu">sum</span>((x <span class="sc">-</span> xbar)<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>reg.SE <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="dv">1</span><span class="sc">/</span>(N<span class="dv">-2</span>) <span class="sc">*</span> (SSy<span class="sc">/</span>SSx))</span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>reg.SE</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.04176698</code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="do">## compare to standard error extracted from model summary</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(asians.fit)<span class="sc">$</span>coefficients[<span class="dv">2</span>,<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.04176698</code></pre>
</div>
</div>
<p>This is also equivalent to the standard error of the estimate in an ANOVA comparison with two groups, as ANOVA has an equivalence to regression and the t-test in the case of a two-group comparison.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>a1 <span class="ot">&lt;-</span> <span class="fu">aov</span>(study2_avg <span class="sc">~</span> treatment_cit, <span class="at">data =</span> asians)</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="fu">diag</span>(<span class="fu">vcov</span>(a1)))[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>treatment_cit 
   0.04176698 </code></pre>
</div>
</div>
<p>In practice, researchers use each of these methods, even though there may be minor differences.</p>
</section>
<section id="experimental-design-complications" class="level2" data-number="4.9">
<h2 data-number="4.9" class="anchored" data-anchor-id="experimental-design-complications"><span class="header-section-number">4.9</span> Experimental Design Complications</h2>
<p>The uncertainty calculations we have done so far have focused on comparisons between two experimental groups, using independent samples (where treatment has been randomly assigned), in a one-shot study.</p>
<p>Of course, as we read in section 3, these are not the only experimental designs.</p>
<ul>
<li>We may have designs with more than two experimental groups</li>
<li>We may have designs where we measure an outcome both pre-treatment and post-treatment</li>
<li>We may have designs where we expose a subject to multiple experimental treatments (e.g., in conjoint studies).</li>
</ul>
<p>Each of these cases may present a slight modifications in how we conduct hypothesis tests and compute uncertainty. We will cover these as we encounter them.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./03-ExperimentalDesign.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Experimental Design</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./05-Visualization.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Visualization</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>