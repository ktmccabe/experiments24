<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Experiments 2024 - 10&nbsp; Mediation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./11-conjoints.html" rel="next">
<link href="./09-LabExperiments.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./10-Mediation.html"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Mediation</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Experiments 2024</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Notes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-Experimentation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Why Experiment?</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-CausalEffects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Causal Effects</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-ExperimentalDesign.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Experimental Design</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-Uncertainty.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Uncertainty</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-Visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Visualization</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-ethics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Ethics and Sampling Considerations</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-FieldExperiments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Field Experiments</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-QuasiNaturalExperiments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Quasi and Natural Experiments</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-LabExperiments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Lab Experiments and Behavioral Games</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-Mediation.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Mediation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-conjoints.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Conjoints</span></span></a>
  </div>
</li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Section Contents</h2>
   
  <ul>
  <li><a href="#mediation-overview" id="toc-mediation-overview" class="nav-link active" data-scroll-target="#mediation-overview"><span class="header-section-number">10.1</span> Mediation Overview</a>
  <ul>
  <li><a href="#distinguishing-mediators-vs.-moderators" id="toc-distinguishing-mediators-vs.-moderators" class="nav-link" data-scroll-target="#distinguishing-mediators-vs.-moderators"><span class="header-section-number">10.1.1</span> Distinguishing mediators vs.&nbsp;moderators</a></li>
  </ul></li>
  <li><a href="#implementing-a-mediation-analysis" id="toc-implementing-a-mediation-analysis" class="nav-link" data-scroll-target="#implementing-a-mediation-analysis"><span class="header-section-number">10.2</span> Implementing a Mediation Analysis</a>
  <ul>
  <li><a href="#baron-kenny-approach" id="toc-baron-kenny-approach" class="nav-link" data-scroll-target="#baron-kenny-approach"><span class="header-section-number">10.2.1</span> Baron-Kenny Approach</a></li>
  <li><a href="#problems-with-mediation" id="toc-problems-with-mediation" class="nav-link" data-scroll-target="#problems-with-mediation"><span class="header-section-number">10.2.2</span> Problems with Mediation</a></li>
  </ul></li>
  <li><a href="#causal-mediation-framework" id="toc-causal-mediation-framework" class="nav-link" data-scroll-target="#causal-mediation-framework"><span class="header-section-number">10.3</span> Causal Mediation Framework</a>
  <ul>
  <li><a href="#acme-assumptions" id="toc-acme-assumptions" class="nav-link" data-scroll-target="#acme-assumptions"><span class="header-section-number">10.3.1</span> ACME Assumptions</a></li>
  </ul></li>
  <li><a href="#acme-application-in-r" id="toc-acme-application-in-r" class="nav-link" data-scroll-target="#acme-application-in-r"><span class="header-section-number">10.4</span> ACME Application in R</a>
  <ul>
  <li><a href="#mediation-r-implementation" id="toc-mediation-r-implementation" class="nav-link" data-scroll-target="#mediation-r-implementation"><span class="header-section-number">10.4.1</span> Mediation R Implementation</a></li>
  <li><a href="#sensitivity-analyses" id="toc-sensitivity-analyses" class="nav-link" data-scroll-target="#sensitivity-analyses"><span class="header-section-number">10.4.2</span> Sensitivity Analyses</a></li>
  </ul></li>
  <li><a href="#mediation-alternatives" id="toc-mediation-alternatives" class="nav-link" data-scroll-target="#mediation-alternatives"><span class="header-section-number">10.5</span> Mediation Alternatives</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="mediation" class="quarto-section-identifier"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Mediation</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>In this section, we will discuss mediation. It helps us answer the question of, “how does this treatment affect that outcome?” (Bullock and Ha, 508)</p>
<p>We will draw on the following resources</p>
<ul>
<li>Gerber and Green. 2012. Chapter 10.</li>
<li>Bullock, John and Shang E. Ha. 2011. “Mediation Analysis is Harder than it Looks.” In Cambridge Handbook of Experimental Political Science.</li>
<li>Used for R code: Gadarian, Shana Kushner and Eric van der Vort. 2017. “The Gag Reflex: Disgust Rhetoric and Gay Rights in American Politics.” Political Behavior DOI: 10.1007/s11109-017-9412-x.</li>
<li>Kosuke Imai, Luke Keele, Dustin Tingley and Teppei Yamamoto. 2011. “Unpacking the Black Box of Causality: Learning about Causal Mechanisms from Experimental and Observational Data.” American Political Science Review, 105(4), pp.&nbsp;765-789</li>
<li>Avidit Acharya, Matthew Blackwell, and Maya Sen.&nbsp;2018. “Analyzing Causal Mechanisms in Survey Experiments.” Political Analysis, Vol. 26, No.&nbsp;4: 357-378</li>
</ul>
<p>We will cover</p>
<ul>
<li>What is the general approach?</li>
<li>What are the assumptions? Why are these often violated?</li>
<li>How can I implement it?</li>
<li>Alternatives: Causal process vs.&nbsp;Causal interaction/intervention (Acharya et al.)</li>
</ul>
<p>Example: Job training</p>
<ul>
<li><span class="math inline">\(Z_i\)</span> is 1 if participating in job training program</li>
<li><span class="math inline">\(Y_i\)</span> Level of Depression</li>
<li><span class="math inline">\(M_i\)</span> Level of job-seeking efficacy</li>
</ul>
<section id="mediation-overview" class="level2" data-number="10.1">
<h2 data-number="10.1" class="anchored" data-anchor-id="mediation-overview"><span class="header-section-number">10.1</span> Mediation Overview</h2>
<p>Three broad schools of thought on mediation analysis</p>
<ul>
<li>Never use it</li>
<li>Use it with extreme caution</li>
<li>Design your way out of the issue</li>
<li>(Of course, a fourth: use it without care)</li>
</ul>
<section id="distinguishing-mediators-vs.-moderators" class="level3" data-number="10.1.1">
<h3 data-number="10.1.1" class="anchored" data-anchor-id="distinguishing-mediators-vs.-moderators"><span class="header-section-number">10.1.1</span> Distinguishing mediators vs.&nbsp;moderators</h3>
<p>What is the difference between a pre-treatment and post-treatment covariate?</p>
<p>What is the difference between mediation and moderation?</p>
<ul>
<li>Mediation– generally answers the why/how. WHAT’S THE MECHANISM!?!?</li>
<li>Moderation– generally answers the for whom/when</li>
</ul>
<p><img src="images/mediation.png" class="img-fluid" style="width:80.0%"></p>
<p><em>Gerber and Green 2012</em></p>
<p>We can identify multiple pathways in this diagram</p>
<ul>
<li>Total effect from <span class="math inline">\(Z_i\)</span> to <span class="math inline">\(Y_i =\)</span></li>
<li>Direct effect (<span class="math inline">\(d\)</span>) from <span class="math inline">\(Z_i\)</span> to <span class="math inline">\(Y_i\)</span> +</li>
<li>Indirect (“mediation”) effect (<span class="math inline">\(a*b\)</span>) from <span class="math inline">\(Z_i\)</span> to <span class="math inline">\(Y_i\)</span> through <span class="math inline">\(M_i\)</span></li>
</ul>
</section>
</section>
<section id="implementing-a-mediation-analysis" class="level2" data-number="10.2">
<h2 data-number="10.2" class="anchored" data-anchor-id="implementing-a-mediation-analysis"><span class="header-section-number">10.2</span> Implementing a Mediation Analysis</h2>
<p>We will cover two approaches for estimating mediation effects.</p>
<section id="baron-kenny-approach" class="level3" data-number="10.2.1">
<h3 data-number="10.2.1" class="anchored" data-anchor-id="baron-kenny-approach"><span class="header-section-number">10.2.1</span> Baron-Kenny Approach</h3>
<p>Traditional mediation analysis (Baron and Kenny 1986)</p>
<p>Conduct three regressions where <span class="math inline">\(M_i\)</span> is the mediator, <span class="math inline">\(Y_i\)</span> is the outcome and <span class="math inline">\(Z_i\)</span> is the experimental assignment.</p>
<span class="math display">\[\begin{align*}
M_i &amp;= \alpha_1 +  aZ_i + \epsilon_{1i}\\
Y_i &amp;= \alpha_2 +  cZ_i + \epsilon_{2i}\\
Y_i &amp;= \alpha_3 +  dZ_i + bM_i + \epsilon_{3i}
\end{align*}\]</span>
<p>Strategy:</p>
<ol type="1">
<li>See if effect of treatment on mediator is significant.</li>
<li>See if effect of treatment on outcome is significant.</li>
<li>See if effect of mediator on outcome is significant, controlling on the treatment.</li>
</ol>
<p>Let’s see how these equations relate to our quantities of interest:</p>
<p>Substitute equation 1 (<span class="math inline">\(M_i = \alpha_1 + aZ_i + \epsilon_{1i}\)</span>) into equation 3</p>
<span class="math display">\[\begin{align*}
Y_i &amp;= \alpha_3 +  dZ_i + bM_i + \epsilon_{3i}\\
Y_i &amp;= \alpha_3 +  dZ_i + b(\alpha_1 +  aZ_i + \epsilon_{1i}) + \epsilon_{3i}\\
Y_i &amp;= \alpha_3 +  dZ_i + b\alpha_1 + baZ_i + b\epsilon_{1i} + \epsilon_{3i}\\
Y_i &amp;= \alpha_3 + (d + ab)Z_i + b(\alpha_1 + \epsilon_{1i}) + \epsilon_{3i}
\end{align*}\]</span>
<p>The total effect of <span class="math inline">\(Z_i\)</span> on <span class="math inline">\(Y_i\)</span> is <span class="math inline">\(c = d + ab\)</span>. The direct effect of <span class="math inline">\(Z_i\)</span> is <span class="math inline">\(d\)</span>. The indirect effect is <span class="math inline">\(ab\)</span>.</p>
<p><strong><em>Criticism of Approach</em></strong>: “But increasing use of the Baron- Kenny method is not a good thing. Like related methods that do not require manipulation of mediators, it is biased, and in turn it leads researchers to biased conclusions about mediation” (Bullock and Ha, 509)</p>
</section>
<section id="problems-with-mediation" class="level3" data-number="10.2.2">
<h3 data-number="10.2.2" class="anchored" data-anchor-id="problems-with-mediation"><span class="header-section-number">10.2.2</span> Problems with Mediation</h3>
<p>Let’s recall how we came to understand an unbiased estimate of the ATE in experiments.</p>
<span class="math display">\[\begin{align*}
E[\hat{ATE}]
&amp;= \frac{1}{m}\sum_1^m E(Y_i) - \frac{1}{N-m}\sum_{m+1}^{N} E(Y_i )]\\
&amp;= E[Y_i(1) | Z_i = 1] - E[Y_i(0) | Z_i = 0]\\
&amp;=E[Y_i(1) - Y_i(0)] \\
&amp;= ATE
\end{align*}\]</span>
<p>What was a key assumption that allowed us to drop the <span class="math inline">\(Z_i\)</span> from the equations?</p>
<p>Why is mediation hard?</p>
<ul>
<li>The mediator (<span class="math inline">\(M_i\)</span>) is not randomly assigned</li>
<li>For equation 3: <span class="math inline">\(Y_i = \alpha_3 + dZ_i + bM_i + \epsilon_{3i}\)</span> we move from experimental to observational land</li>
<li>Problem of omitted confounders</li>
</ul>
<p>If an unobserved variable affects both <span class="math inline">\(M\)</span> and <span class="math inline">\(Y\)</span> it will cause <span class="math inline">\(\epsilon_1\)</span> and <span class="math inline">\(\epsilon_3\)</span> to covary (be nonzero).</p>
<ul>
<li>“Random assignment of <span class="math inline">\(Z_i\)</span> can ensure that <span class="math inline">\(Z\)</span> bears no systematic relationsto <span class="math inline">\(\epsilon_1\)</span> and <span class="math inline">\(\epsilon_3\)</span> but nothing about whether <span class="math inline">\(M\)</span> or <span class="math inline">\(Y\)</span> are systematically related to these error terms.”
<ul>
<li><span class="math inline">\(\E(\hat{b}) = b + \frac{cov(\epsilon_1, \epsilon_3)}{var(\epsilon_1)}\)</span></li>
<li><span class="math inline">\(\E(\hat{d}) = d - a\frac{cov(\epsilon_1, \epsilon_3)}{var(\epsilon_1)}\)</span></li>
</ul></li>
</ul>
<p>It could bias the effect of <span class="math inline">\(M_i\)</span> and bias estimates of the effects of any variables with which <span class="math inline">\(M_i\)</span> is correlated, including <span class="math inline">\(Z_i\)</span>!!</p>
</section>
</section>
<section id="causal-mediation-framework" class="level2" data-number="10.3">
<h2 data-number="10.3" class="anchored" data-anchor-id="causal-mediation-framework"><span class="header-section-number">10.3</span> Causal Mediation Framework</h2>
<p>Mediation in Potential Outcomes Notation</p>
<p>Total unit treatment effect <span class="math inline">\(= Y_i(1, M_i(1)) - Y_i(0, M_i(0))\)</span></p>
<ul>
<li>Ex: <span class="math inline">\(M_i(1)\)</span>: Level of efficacy individual <span class="math inline">\(i\)</span> would report if he participates in the program</li>
<li>Ex: <span class="math inline">\(Y_i(1, M_i(1))\)</span>: Level of depression individual <span class="math inline">\(i\)</span> would report if he participates in the program and reports efficacy at level <span class="math inline">\(M_i(1)\)</span>.</li>
</ul>
<p><strong><em>The Perils of Mediation: Complex Potential Outcomes</em></strong></p>
<p><strong><em>Mediation Effect</em></strong>: How the outcome (<span class="math inline">\(Y_i\)</span>) changes if we were to hold the experimental assignment (<span class="math inline">\(Z_i\)</span>) constant while varying the mediator (<span class="math inline">\(M_i\)</span>) by the amount the mediator would change if experimental assignment (<span class="math inline">\(Z_i\)</span>) were varied.</p>
<p>The indirect of <span class="math inline">\(M_i(z)\)</span> holding <span class="math inline">\(z\)</span> constant at 0 or 1:</p>
<ul>
<li><span class="math inline">\(Y_i(M_i(1), 1) - Y_i(M_i(0), 1)\)</span></li>
<li><span class="math inline">\(Y_i(M_i(1), 0) - Y_i(M_i(0), 0)\)</span></li>
</ul>
<p>Note: one of the terms in each equation is never observed empirically.</p>
<p><strong><em>Direct effect</em></strong>: How the outcome (<span class="math inline">\(Y_i\)</span>) would change if we were to vary experimental assignment <span class="math inline">\(Z_i\)</span> while holding the mediator (<span class="math inline">\(M_i\)</span>) constant at the value it would take on for a given value of <span class="math inline">\(Z_i\)</span>?</p>
<p>Direct effects of <span class="math inline">\(Z_i\)</span> on <span class="math inline">\(Y_i\)</span> holding <span class="math inline">\(M_i(z)\)</span> constant at <span class="math inline">\(M_i(1)\)</span> or <span class="math inline">\(M_i(0)\)</span>:</p>
<ul>
<li><span class="math inline">\(Y_i(M_i(0), 1) - Y_i(M_i(0), 0)\)</span></li>
<li><span class="math inline">\(Y_i(M_i(1), 1) - Y_i(M_i(1), 0)\)</span></li>
</ul>
<p>Note: one of the terms in each equation is never observed empirically.</p>
<section id="acme-assumptions" class="level3" data-number="10.3.1">
<h3 data-number="10.3.1" class="anchored" data-anchor-id="acme-assumptions"><span class="header-section-number">10.3.1</span> ACME Assumptions</h3>
<p>We assume sequential ignorability</p>
<ol type="1">
<li><span class="math inline">\(Y_i(z, m), M_i(z) \perp Z_i | X_i = x\)</span></li>
<li><span class="math inline">\(Y_i(z, m) \perp M_i(z) | Z_i = z, X_i = x\)</span></li>
</ol>
<p>Sequential Ignorability: Treatment is ignorable given the observed pre-treatment confounders and mediator is ignorable given the observed treatment and the observed pre-treatment covariates.</p>
<ul>
<li>This means <span class="math inline">\(Z_i\)</span> is as-if randomized conditional on <span class="math inline">\(X_i=x\)</span></li>
<li>And <span class="math inline">\(M_i(z)\)</span> is as-if randomized conditional on <span class="math inline">\(X_i=x\)</span> and <span class="math inline">\(Z_i = z\)</span>
<ul>
<li>In standard experiments, you get (1) through randomization but not necessarily (2).</li>
</ul></li>
<li><span class="math inline">\(X_i\)</span> must include all confounders. NOTE: confounders MUST be pre-treatment. Post-treatment confounders are not allowed!
<ul>
<li>Potential violations of the assumption could be unobserved pre-treatment confounders or any observed/unobserved post-treatment confounders (e.g., alternative causal pathways related to the observed mediator).</li>
</ul></li>
</ul>
<p>Visually, we can see this from Imai et al.&nbsp;(2009)</p>
<p><img src="images/mediationassumption.png" class="img-fluid" style="width:80.0%"></p>
</section>
</section>
<section id="acme-application-in-r" class="level2" data-number="10.4">
<h2 data-number="10.4" class="anchored" data-anchor-id="acme-application-in-r"><span class="header-section-number">10.4</span> ACME Application in R</h2>
<p>We are going to replicate a portion of the analysis from “The gag reflex: Disgust rhetoric and gay rights in American politics” by Shana Kushner Gadarian and Eric Van der Vort published in <em>Political Behavior</em> in 2018.</p>
<ul>
<li>Amazon’s Mechanical Turk study of 636 respondents</li>
<li><span class="math inline">\(Z_i\)</span>: Randomly assigned to positive, neutral, or disgust article/photo about a constitutional amendment proposed to ban same-sex marriage</li>
</ul>
<p><img src="images/gadarian2.png" class="img-fluid" style="width:80.0%"></p>
<ul>
<li><span class="math inline">\(M_i(z)\)</span>: Self-reported general level of disgust (also maybe anger and enthusiasm)</li>
<li><span class="math inline">\(Y_i(z,M_i(z))\)</span>: Support for LGBT issues</li>
</ul>
<p>Approach the authors take: Run mediation model for disgust, also controlling on anger as a covariate since the treatment might influence anger (See Table 5).</p>
<section id="mediation-r-implementation" class="level3" data-number="10.4.1">
<h3 data-number="10.4.1" class="anchored" data-anchor-id="mediation-r-implementation"><span class="header-section-number">10.4.1</span> Mediation R Implementation</h3>
<p>We are going to fit the Imai et al.&nbsp;ACME framework</p>
<ol type="1">
<li>Fit a “mediator” model with <span class="math inline">\(M_i\)</span> as the dependent variable, with the treatment <span class="math inline">\(Z_i\)</span> and other pre-treatment covariates <span class="math inline">\(X_i\)</span> as the covariates.</li>
<li>Fit a “outcome” model with <span class="math inline">\(Y_i\)</span> as the dependent variable, with <span class="math inline">\(M_i\)</span>, <span class="math inline">\(Z_i\)</span> and <span class="math inline">\(X_i\)</span> as covariates.</li>
</ol>
<p>Note: This is more flexible than Baron-Kenny because you don’t have to use least squares. Should be the same as Baron-Kenny when both models are linear models.</p>
<ol start="3" type="1">
<li>Use the <code>mediate()</code> function: <code>mediate(model.m, model.y, sims = 1000, treat = "treatname", mediator = "mediatorname")</code>
<ul>
<li>The mediator model is the first input.</li>
<li>The outcome model is the second input.</li>
<li>Then specify the variable names for the treatment and mediator variables.</li>
<li>Store the output as an object.
<ul>
<li>Use <code>summary()</code> on the object to get the ACME, ADE, and total effect, with uncertainty estimates.</li>
<li>Use <code>plot()</code> on the object to plot these three effects.</li>
</ul></li>
</ul></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rio)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>gad <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"gadvan.dta"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Our key variables are</p>
<ul>
<li><code>adoption</code>: support for same-sex adoption</li>
<li><code>disgust_treat</code>: Disgust treatment</li>
<li><code>postive_treat</code>: Positive treatment</li>
<li><code>Disgust</code>: Feelings of disgust</li>
<li><code>angry</code>: Feelings of anger</li>
<li><code>dss</code>: Disgust sensitivity scale</li>
<li><code>PID</code>: party identification</li>
<li><code>ideology</code>: ideology</li>
</ul>
<p>We will focus on column 2 of Table 5 and fit a mediation model for the effect on support for same-sex adoption using the Imai et al.&nbsp;framework.</p>
<ul>
<li>Let’s inspect these models? Why do the authors include control variables? Would you have done anything differently?</li>
<li>Which aspects of the assumption of sequential ignorability does this design easily meet? Are there possible violations to aspects of the assumptions?</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Mediator as outcome, regressed on treatment</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>model.m <span class="ot">&lt;-</span> <span class="fu">lm</span>(Disgust <span class="sc">~</span> disgust_treat <span class="sc">+</span> positive_treat <span class="sc">+</span> dss, <span class="at">data =</span> gad)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Y as outcome, controlling on mediator and treatment</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>model.y <span class="ot">&lt;-</span> <span class="fu">lm</span>(adoption <span class="sc">~</span> disgust_treat <span class="sc">+</span> positive_treat </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>                <span class="sc">+</span> Disgust <span class="sc">+</span> angry <span class="sc">+</span> PID <span class="sc">+</span> ideology, <span class="at">data=</span>gad)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Install and load mediation package</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"mediation"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mediation)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>medfit <span class="ot">&lt;-</span> <span class="fu">mediate</span>(<span class="at">model.m=</span>model.m, <span class="at">model.y=</span>model.y,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">treat=</span><span class="st">"disgust_treat"</span>, <span class="at">mediator=</span><span class="st">"Disgust"</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(medfit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Causal Mediation Analysis 

Quasi-Bayesian Confidence Intervals

               Estimate 95% CI Lower 95% CI Upper p-value    
ACME            -0.0390      -0.0585        -0.02  &lt;2e-16 ***
ADE              0.0219      -0.0266         0.07    0.38    
Total Effect    -0.0172      -0.0679         0.04    0.49    
Prop. Mediated   1.1350     -12.4455        15.43    0.49    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Sample Size Used: 636 


Simulations: 1000 </code></pre>
</div>
</div>
<p>Because these are both linear models, we should be able to verify it achieves the same result as the Baron-Kenny approach:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Check with Baron-Kenny</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>c<span class="fl">.1</span> <span class="ot">&lt;-</span> <span class="fu">coef</span>(model.m)[<span class="st">"disgust_treat"</span>] <span class="co"># Coef for treatment ("a" from before)</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>c<span class="fl">.2</span> <span class="ot">&lt;-</span> <span class="fu">coef</span>(model.y)[<span class="st">"Disgust"</span>] <span class="co"># Coef for mediator ("b" from before)</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Mediation Effect (indirect effect)</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>c<span class="fl">.1</span> <span class="sc">*</span> c<span class="fl">.2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>disgust_treat 
  -0.03847702 </code></pre>
</div>
</div>
<p>We can plot the results</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(medfit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-Mediation_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>How should we interpret the results?</p>
</section>
<section id="sensitivity-analyses" class="level3" data-number="10.4.2">
<h3 data-number="10.4.2" class="anchored" data-anchor-id="sensitivity-analyses"><span class="header-section-number">10.4.2</span> Sensitivity Analyses</h3>
<p>Sensitivity to violations of sequential ignorability, where the parameter <span class="math inline">\(\rho\)</span> represents the correlation between unexplained pre-treatment factors related to <span class="math inline">\(Y\)</span> and <span class="math inline">\(M\)</span>. See Imai et al.&nbsp;(2010).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>sens.out <span class="ot">&lt;-</span> <span class="fu">medsens</span>(medfit, <span class="at">rho.by =</span> <span class="fl">0.1</span>, </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">effect.type =</span> <span class="st">"indirect"</span>, <span class="at">sims =</span> <span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(sens.out, <span class="at">sens.par =</span> <span class="st">"rho"</span>, <span class="at">main =</span> <span class="st">"Disgust"</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.2</span>, <span class="fl">0.2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-Mediation_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="mediation-alternatives" class="level2" data-number="10.5">
<h2 data-number="10.5" class="anchored" data-anchor-id="mediation-alternatives"><span class="header-section-number">10.5</span> Mediation Alternatives</h2>
<p>Mediation is hard. So, what can we do instead?</p>
<ul>
<li>Only examine the effect of <span class="math inline">\(Z_i\)</span> on <span class="math inline">\(M_i\)</span></li>
<li>Implicit mediation analysis (Gerber and Green chap.&nbsp;10)</li>
<li>Randomly manipulate the mediator (Acharya et al.)
<ul>
<li>For example, to examine the (average) “controlled direct effect as the effect of treatment for a fixed value of the mediator” (Acharya et al.)</li>
<li>Or examine Average causal effect of the mediator: “How manipulating a secondary, possibly intermediate variable can change the magnitude and direction of a causal effect”</li>
</ul></li>
<li>For more designs (See Imai et al.&nbsp;2010 and R mediation documentation)
<ul>
<li>For analyses with multiple mechanisms, see <a href="https://imai.princeton.edu/research/files/medsens.pdf">Imai and Yammamoto (2013)</a>. For applications to observational data, see also <a href="https://www.mattblackwell.org/files/papers/direct-effects.pdf">Acharya, Blackwell, Sen (2016)</a></li>
</ul></li>
</ul>
<p><strong><em>Example: Extension of Tomz and Weeks (2013)</em></strong></p>
<p>Acharya modify the design from Tomz and Weeks (2013). Tomz and Weeks (2013) show, “that Americans are less likely to support preemptive strikes against democracies versus nondemocracies. Using our framework, we are able to show that this difference is strengthened when information about potential threats are provided, suggesting that the potential threat of a nuclear program plays a role in how Americans decide to support preemptive strikes against democracies versus nondemocracies. Importantly, we reach this conclusion without requiring the strong assumptions of the original paper’s mediation analysis.”</p>
<p>Subjects presented with different versions of vignettes</p>
<ul>
<li><span class="math inline">\(Y\)</span>: Outcome: Support for a preemptive strike</li>
<li><span class="math inline">\(T\)</span>: Randomly assigned to different treatment arms (democracy vs.&nbsp;non-democracy)</li>
<li>Natural mediator arm- only treatment randomized</li>
<li>Manipulated Mediator (presence of information about threat)
<ul>
<li>“The country has stated that it is seeking nuclear weapons to aid in a conflict with another country in the region.”</li>
</ul></li>
</ul>
<p><strong><em>Controlled Direct Effect</em></strong></p>
<ul>
<li>The effect of the treatment on the outcome when the mediator is held constant for all subjects as <span class="math inline">\(m\)</span>.</li>
<li><span class="math inline">\(CDE_i(t_a,t_b,m)=Y_i(t_a,m)-Y_i(t_b,m)\)</span></li>
</ul>
<p>Example: would be the difference in support for a strike between these two vignettes when respondents are provided with the additional information about the threat.</p>
<ul>
<li>This is different from the naturally occurring indirect effect, which is: the difference in support when the country is a democracy and when the country is a democracy but the perceived threat is set to the level the respondent would infer if the country were not a democracy.</li>
</ul>
<p>Implementation in R</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Load data</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>tw <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"tw-replication-dvn.csv"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Outcome: support for strike</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>tw<span class="sc">$</span>favor_binary <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(tw<span class="sc">$</span>favor_attack <span class="sc">&lt;</span> <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(tw<span class="sc">$</span>favor_binary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  0   1 
840 406 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Treatment indicator</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(tw<span class="sc">$</span>dem_dummy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  0   1 
614 633 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Mediator dummy- reverse coded </span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="do">## so threat=0 means presence of threat</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>tw<span class="sc">$</span>threat_dummy <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">-</span>tw<span class="sc">$</span>threat_dummy</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(tw<span class="sc">$</span>threat_dummy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  0   1 
623 624 </code></pre>
</div>
</div>
<p>We can fit an interaction between the two treatments– democracy <span class="math inline">\(\times\)</span> threat.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(favor_binary <span class="sc">~</span> dem_dummy<span class="sc">*</span>threat_dummy, <span class="at">data =</span> tw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Our controlled direct effect will be the effect of the treatment when the mediator = 0, indicating the presence of the threat.</p>
<ul>
<li>Recall, in interactions we interpret <code>dem_dummy</code> as the effect of the treatment when <code>threat_dummy</code> is 0.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>acde <span class="ot">&lt;-</span> <span class="fu">coef</span>(fit)[<span class="st">"dem_dummy"</span>]</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>acde</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> dem_dummy 
-0.1594824 </code></pre>
</div>
</div>
<p>This represents the controlled direct effect- treatment effect when people are provided information about threat.</p>
<p>Within this design, we could still recover an average treatment effect based on just the condition where there was no presence of a threat. Even within the same interaction model, we could get this by focusing on the effect of the treatment when <code>threat_dummy = 1</code>, indicating no presence of a threat.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(favor_binary <span class="sc">~</span> dem_dummy<span class="sc">*</span>threat_dummy, <span class="at">data =</span> tw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For the <strong><em>average treatment effect</em></strong>, we want the effect of the treatment under natural mediation settings. This is</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>ate <span class="ot">&lt;-</span> <span class="fu">coef</span>(fit)[<span class="st">"dem_dummy"</span>] <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="st">"dem_dummy:threat_dummy"</span>]</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>ate</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  dem_dummy 
-0.05632118 </code></pre>
</div>
</div>
<p>Because it represents the difference in outcomes when we manipulate the treatment but allow the mediator to take its natural values. An alternative way to get this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(fit, <span class="fu">data.frame</span>(<span class="at">dem_dummy =</span> <span class="dv">1</span>, <span class="at">threat_dummy =</span> <span class="dv">1</span>)) <span class="sc">-</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">predict</span>(fit, <span class="fu">data.frame</span>(<span class="at">dem_dummy =</span> <span class="dv">0</span>, <span class="at">threat_dummy =</span> <span class="dv">1</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          1 
-0.05632118 </code></pre>
</div>
</div>
<p><strong><em>Eliminated Effect</em></strong></p>
<p>A final effect we could recover is the eliminated effect. The eliminated effect is the difference between the ATE - ACDE: “The nature of a causal mechanism is about how much of a treatment effect is explained by a particular mediator.”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(favor_binary <span class="sc">~</span> dem_dummy<span class="sc">*</span>threat_dummy, <span class="at">data =</span> tw)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>aee <span class="ot">&lt;-</span> <span class="fu">coef</span>(fit)[<span class="st">"dem_dummy:threat_dummy"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Well, in this example, the interaction term represents how much our effect varies as we move between values of the <code>threat_dummy</code> variable. BINGO!</p>
<ul>
<li>“Thus, we can interpret the eliminated effect as the portion of the ATE that can be explained by <span class="math inline">\(M_i\)</span>, either through indirect effects or interactions.”</li>
</ul>
<p>Plot all three. The authors use bootstrapping and robust standard errors. These are standard OLS confidence bands.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="fl">4.1</span>, <span class="fl">0.1</span>, <span class="fl">2.1</span>, <span class="fl">0.1</span>))</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> <span class="fu">c</span>(ate, acde, aee), <span class="at">y =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.25</span>, <span class="fl">0.25</span>), </span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">4</span>), <span class="at">bty=</span><span class="st">"n"</span>,</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">yaxt =</span> <span class="st">"n"</span>, <span class="at">pch=</span><span class="dv">20</span>,</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">""</span>, <span class="at">main =</span> <span class="st">"Tomz and Weeks Extension"</span>, </span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Effect on Supporting Preemptive Strike"</span>)</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">"grey50"</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(<span class="at">x =</span> <span class="sc">-</span><span class="fl">0.01</span>, <span class="at">y =</span> <span class="dv">3</span>, <span class="st">"Eliminated Effect = ATE - ACDE"</span>, <span class="at">pos=</span><span class="dv">2</span>)</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(<span class="at">x =</span> <span class="fl">0.15</span>, <span class="at">y =</span> <span class="dv">2</span>, <span class="st">"Effect of Democracy </span><span class="sc">\n</span><span class="st"> Fixing Threat (ACDE)"</span>)</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(<span class="at">x =</span> <span class="fl">0.15</span>, <span class="at">y =</span> <span class="dv">1</span>, <span class="st">"Effect of Democracy </span><span class="sc">\n</span><span class="st"> without Fixing Threat (ATE)"</span>)</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="fu">confint</span>(fit)[<span class="dv">2</span>,], <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="fu">confint</span>(fit)[<span class="dv">4</span>,], <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>))</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>se.sum <span class="ot">&lt;-</span><span class="fu">sqrt</span>(<span class="fu">vcov</span>(fit)[<span class="dv">2</span>,<span class="dv">2</span>] <span class="sc">+</span> <span class="fu">vcov</span>(fit)[<span class="dv">4</span>,<span class="dv">4</span>] <span class="sc">+</span> <span class="dv">2</span><span class="sc">*</span><span class="fu">vcov</span>(fit)[<span class="dv">2</span>,<span class="dv">4</span>])</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>( <span class="fu">c</span>(ate <span class="sc">-</span> <span class="fl">1.96</span><span class="sc">*</span>se.sum, ate <span class="sc">+</span> <span class="fl">1.96</span><span class="sc">*</span>se.sum), <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="10-Mediation_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./09-LabExperiments.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Lab Experiments and Behavioral Games</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./11-conjoints.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Conjoints</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>